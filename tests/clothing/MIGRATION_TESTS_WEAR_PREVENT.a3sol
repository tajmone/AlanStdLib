; ******************************************************************************
; *                                                                            *
; *                      TEST LISTING ITEMS PREVENTI WEAR                      *
; *                                                                            *
; ******************************************************************************
; The new clothing system will now report the specific items which are preventing
; wearing a clothing item, instead of listing everything the player is wearing.
; This script tests that the correct items are being reported -- i.e. that there
; are no discrepancies between the internal system and the final report.
north
inventory
east
take union suit
northwest
; ******************************************************************************
; COMMON CLOTHING
; ******************************************************************************
; Here we test the "normal" clothing blocking rules -- i.e. normally a clothing
; item prevents wearing anything on a layer below it.
undress
; ==============================================================================
; TEST FEET
; ==============================================================================
wear sneakers
; ------------------------------------------------------------------------------
; TEST SHOES -> BLOCK SOCKS -> OK!
; ------------------------------------------------------------------------------
wear socks
; ==============================================================================
; TEST LEGS
; ==============================================================================
wear khakis
; ------------------------------------------------------------------------------
; TEST TROUSERS -> BLOCK PANTYHOSE
; ------------------------------------------------------------------------------
wear pantyhose
; ******************************************************************************
; SPECIAL CLOTHING EXCEPTIONS
; ******************************************************************************
; Special items like skirts, coats, dresses, teddies, etc, are treated as special
; cases in the internal evaluations of wether they are blocking the action, so
; we need to check here that they are also treated correctly in the reported
; blocking items (since the report code uses independent code to handle special
; items).
; ==============================================================================
; TEST COAT (topcover: 64 | botcover: 64)
; ==============================================================================
undress
wear coat
; ------------------------------------------------------------------------------
; TEST COAT -> DON'T BLOCK LOWER-BODY -> OK!
; ------------------------------------------------------------------------------
; Coats should not prevent wearing lower-body garnments (botcover <64).
wear khakis
; ------------------------------------------------------------------------------
; TEST COAT -> DON'T BLOCK LOWER-BODY -> SOMETHING ELSE BLOCKS -> OK!
; ------------------------------------------------------------------------------
; We must check that the blocking items report is correct, and doesn't list the
; 'coat' as being one of them.
; (i.e. the report must match the internal calculations that govern the verb)
;
; WEAR BLOCKED BY: 'khakis'
wear pantyhose
; ------------------------------------------------------------------------------
; TEST COAT -> BLOCK UPPER-BODY -> OK!
; ------------------------------------------------------------------------------
; But should prevent wearing any top_cover.
wear black shirt
; ==============================================================================
; TEST COAT + OTHER TOP COVERS
; ==============================================================================
; Now let's check that library correctly lists multiple items preventing wear
; along with coat.
undress
wear red shirt
wear coat
; ------------------------------------------------------------------------------
; TEST BLOCKED BY: COAT + RED SHIRT -> OK!
; ------------------------------------------------------------------------------
; WEAR BLOCKED BY: 'coat' & 'red shirt'
wear black shirt
; WEAR BLOCKED BY: 'coat' & 'red shirt'
wear undershirt
undress
wear skirt
; ==============================================================================
; TEST SKIRT (botcover: 32)
; ==============================================================================
; Skirts shouldn't prevent wearing lower-only garnment with botcover <= 8 (which
; excludes trousers), except for teddy like garments (eg. a 'union suit') which
; are one-piece garnments covering torso and legs.
; ------------------------------------------------------------------------------
; TEST SKIRT -> DON'T BLOCK LOWER-BODY
; ------------------------------------------------------------------------------
; WEAR YES: 'pantyhose'
wear pantyhose
; WEAR BLOCKED BY: 'pantyhose' (but not 'skirt'!)
wear boxers
; REMOVE YES: 'pantyhose'
remove pantyhose
; ------------------------------------------------------------------------------
; TEST SKIRT -> BLOCK EXCEPTIONS
; ------------------------------------------------------------------------------
; TEST TROUSERS -- Although trousers belong to a lower layer than skirts, they
; are blocked nonetheless because it wouldn't make sense to wear both at once.
;
; WEAR BLOCKED BY: 'skirt'
wear khakis
; TEST TEDDY-LIKE -- Union suit/teddy are blocked by skirt because they are
;                    one-piece garnment covering torso and legs.
;
; WEAR BLOCKED BY: 'skirt'
wear union suit
