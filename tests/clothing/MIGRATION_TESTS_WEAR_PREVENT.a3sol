; ******************************************************************************
; *                                                                            *
; *                      TEST LISTING ITEMS PREVENTI WEAR                      *
; *                                                                            *
; ******************************************************************************
; The new clothing system will now report the specific items which are preventing
; wearing a clothing item, instead of listing everything the player is wearing.
; This script tests that the correct items are being reported -- i.e. that there
; are no discrepancies between the internal system and the final report.
north
inventory
east
take union suit
northwest
; ******************************************************************************
; COMMON CLOTHING
; ******************************************************************************
; Here we test the "normal" clothing blocking rules -- i.e. normally a clothing
; item prevents wearing anything on a layer below it.
undress
; ==============================================================================
; TEST FEET
; ==============================================================================
; WEAR YES: 'sneakers'
wear sneakers
; ------------------------------------------------------------------------------
; TEST SHOES -> BLOCK SOCKS
; ------------------------------------------------------------------------------
; WEAR BLOCKED BY: 'sneakers'
wear socks
; ==============================================================================
; TEST LEGS
; ==============================================================================
; WEAR YES: 'khakis'
wear khakis
; ------------------------------------------------------------------------------
; TEST TROUSERS -> BLOCK PANTYHOSE
; ------------------------------------------------------------------------------
; WEAR BLOCKED BY: 'khakis'
wear pantyhose
; ******************************************************************************
; SPECIAL CLOTHING EXCEPTIONS
; ******************************************************************************
; Special items like skirts, coats, dresses, teddies, etc, are treated as special
; cases in the internal evaluations of wether they are blocking the action, so
; we need to check here that they are also treated correctly in the reported
; blocking items (since the report code uses independent code to handle special
; items).
; ==============================================================================
; TEST COAT (topcover: 64 | botcover: 64)
; ==============================================================================
undress
wear undershirt
wear coat
; ------------------------------------------------------------------------------
; TEST COAT -> DON'T BLOCK LOWER-BODY
; ------------------------------------------------------------------------------
; Coats should not prevent wearing lower-body garnments (botcover <64).
; 
; WEAR YES: 'khakis'
wear khakis
; ------------------------------------------------------------------------------
; TEST COAT -> DON'T BLOCK LOWER-BODY -> SOMETHING ELSE BLOCKS
; ------------------------------------------------------------------------------
; We must check that the blocking items report is correct, and doesn't list the
; 'coat' as being one of them.
; (i.e. the report must match the internal calculations that govern the verb)
;
; WEAR BLOCKED BY: 'khakis'
wear pantyhose
; ------------------------------------------------------------------------------
; TEST COAT -> BLOCK UPPER-BODY
; ------------------------------------------------------------------------------
; But should prevent wearing/removing any top_cover.
; 
; WEAR BLOCKED BY: 'coat'
wear black shirt
; REMOVE BLOCKED BY: 'coat'
remove undershirt
; ==============================================================================
; TEST COAT + OTHER TOP COVERS
; ==============================================================================
; Now let's check that library correctly lists multiple items preventing wear
; along with coat.
undress
wear red shirt
wear coat
; ------------------------------------------------------------------------------
; TEST BLOCKED BY: COAT + RED SHIRT
; ------------------------------------------------------------------------------
; WEAR BLOCKED BY: 'coat' & 'red shirt'
wear black shirt
; WEAR BLOCKED BY: 'coat' & 'red shirt'
wear undershirt
undress
wear skirt
; ==============================================================================
; TEST SKIRT (botcover: 32)
; ==============================================================================
; Skirts shouldn't prevent wearing lower-only garnment with botcover <= 8 (which
; excludes trousers), except for teddy like garments (eg. a 'union suit') which
; are one-piece garnments covering torso and legs.
; ------------------------------------------------------------------------------
; TEST SKIRT -> DON'T BLOCK LOWER-BODY
; ------------------------------------------------------------------------------
; WEAR YES: 'pantyhose'
wear pantyhose
; WEAR BLOCKED BY: 'pantyhose' (but not 'skirt'!)
wear boxers
; REMOVE YES: 'pantyhose'
remove pantyhose
wear boxers
wear pantyhose
; REMOVE BLOCKED BY: 'pantyhose' (but not 'skirt'!)
remove boxers
; ------------------------------------------------------------------------------
; TEST SKIRT -> DON'T BLOCK LOWER-BODY -> TROUSERS EXCEPTION
; ------------------------------------------------------------------------------
; Although trousers belong to a lower layer than skirt, wearing them with a skirt
; is prevented out of common sense.
;
; WEAR BLOCKED BY: 'skirt'
wear khakis
remove skirt
; ------------------------------------------------------------------------------
; TEST SKIRT -> CAN'T WEAR OVER TROUSERS
; ------------------------------------------------------------------------------
; And it shouldn't be possibile to wear both of them in layered order either
; (ie. wearing trousers first, skirt after):
wear khakis
; WEAR BLOCKED BY: 'khakis'
wear skirt
; TEST TEDDY-LIKE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;                 Union suit/teddy are blocked by skirt because they are a
;                 one-piece garnment covering torso and legs at once.
;                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
; WEAR BLOCKED BY: 'skirt' & 'pantyhose'
wear union suit
; ** NOTE: +~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;          | Pantyhose SHOULDN'T prevent wearing teddy/union-suit, for in real
;          | life they belong to a lower layer. But the Clothing Table defines:
;          | 
;          |    pantyhose -> botcover -> 8  
;          |    teddy     -> botcover -> 4  
;          | 
;          | So this is not an error introduced by new clothing system -- it was
;          | there all along.
;          +~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
south
inventory
; ==============================================================================
; TEST WEARING ITEMS ALREADY WORN/OR WORN BY OTHERS, AND REMOVING UNWORN ITEMS
; ==============================================================================
; ------------------------------------------------------------------------------
; TEST WEARING -> ALREADY WORN
; ------------------------------------------------------------------------------
wear khakis
; ------------------------------------------------------------------------------
; TEST WEARING -> WORN BY NPC
; ------------------------------------------------------------------------------
wear boots
wear uniform
; ------------------------------------------------------------------------------
; TEST REMOVING -> UNWORN
; ------------------------------------------------------------------------------
; Skirt is being carried, not worn:
remove skirt
remove boots
